/* ===== Tick animation (used by Add button) ===== */
.checkmark-container { width: 22px; height: 22px; display: inline-block; }
.checkmark { width: 22px; height: 22px; display: block; }
.checkmark-circle {
  stroke: #22c55e; stroke-width: 2; stroke-miterlimit: 10;
  stroke-dasharray: 166; stroke-dashoffset: 166; stroke-linecap: round;
  animation: cm-stroke 0.5s ease-out forwards;
  fill: none;
}
.checkmark-check {
  stroke: #22c55e; stroke-width: 2.5; stroke-linecap: round; stroke-linejoin: round;
  stroke-dasharray: 48; stroke-dashoffset: 48; animation: cm-stroke 0.3s ease-out 0.5s forwards;
  fill: none;
}
@keyframes cm-stroke { to { stroke-dashoffset: 0; } }

/* ===== Design tokens ===== */
:root{
  --bg:#faf7fb;
  --panel:#ffffff;
  --ink:#0f172a;
  --ink-dim:#475569;
  --accent:#9333ea;
  --accent-2:#6d28d9;
  --ring:0 0 0 1px rgba(15,23,42,.06);
  --shadow-lg:0 20px 60px rgba(15,23,42,.08);
  --radius:14px;
  --radius-lg:18px;
  --grid:1200px;
  --navbg: rgba(255,255,255,.65);
  --container-pad: 20px;
  --brand-logo-h: 100px;                   /* default header logo height */
  --nav-offset: clamp(180px, 16vw, 260px);/* reserved space for the logo + gutter */
}



*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font:16px/1.5 Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--ink);
  background:var(--bg);
}

/* ===== Nav ===== */
.site-nav{
  position: sticky;
  top: 0;
  z-index: 50;
  background: #fff;                         /* solid white */
  border-bottom: 1px solid rgba(15,23,42,.06);
  backdrop-filter: saturate(160%) blur(8px);
  min-height: calc(var(--brand-logo-h) + 18px);
  isolation: auto;
}

/* ===== Helpers ===== */
.container{ max-width:var(--grid); margin:0 auto; padding:0 20px }
.h2{ font-size:28px; line-height:1.2; margin:0 0 12px }
.body{ color:var(--ink-dim) }
.link{ color:var(--accent); text-decoration:none }
.link:hover{ text-decoration:underline }
.card{ background:#fff; border-radius:var(--radius); padding:18px; box-shadow:var(--ring), var(--shadow-lg); }
.cardTitle{ font-weight:800; margin-bottom:6px }
.cardMeta{ color:var(--ink-dim) }
.courseCode{ color:var(--ink-dim); margin-bottom:6px }

/* GSAP splitting safe */
.split-parent, .split-line { overflow: visible; }
.split-char, .split-word { display: inline-block; }

/* ===== Sticky footer layout ===== */
body{ min-height: 100dvh; display:flex; flex-direction:column; }
.site-main{ flex: 1 0 auto; }
.site-footer{ margin-top:44px; background:black; color:#fff; padding:40px 0 28px; }
.footer-grid{ display:grid; gap:18px; grid-template-columns: repeat(4,1fr); }
@media (max-width:980px){ .footer-grid{ grid-template-columns: 1fr 1fr; } }
.footer-brand{ font-weight:800 }
.footer-muted{ color:rgba(255,255,255,.75) }
.footer-head{ font-weight:700; margin-bottom:6px }
.footer-list{ list-style:none; padding:0; margin:0; display:grid; gap:8px }
.footer-link{ color:rgba(255,255,255,.8); text-decoration:none }
.footer-link:hover{ color:#fff }
.footer-bottom{ text-align:center; margin-top:16px; color:rgba(255,255,255,.7) }

/* ===== Dark theme tokens ===== */
[data-theme="dark"]{
  --bg:#070b13;
  --panel:#0e1726;
  --ink:#e6edf3;
  --ink-dim:#a3b3c7;
  --accent:#a78bfa;
  --accent-2:#22d3ee;
  --ring:0 0 0 1px rgba(255,255,255,.06);
  --shadow-lg:0 24px 70px rgba(0,0,0,.55);
  --navbg:rgba(7,11,19,.75);
}
[data-theme="dark"] body{
  background:
    radial-gradient(60vw 38vh at 12% -12%, rgba(168,85,247,.06), transparent 62%),
    radial-gradient(60vw 38vh at 108% -12%, rgba(34,211,238,.06),  transparent 62%),
    var(--bg);
  background-repeat: no-repeat;
  background-attachment: fixed, fixed, scroll; /* keeps look similar on retina/non-retina */
}


/* Smooth transitions */
html, body, .site-nav, .card, .search, .newsForm {
  transition: background-color .25s ease, color .25s ease, box-shadow .25s ease;
}

/* Dark navbar tweaks */
[data-theme="dark"] .site-nav{
  background: var(--navbg);
  border-bottom:1px solid rgba(255,255,255,.08);
  backdrop-filter: saturate(160%) blur(10px);
}
[data-theme="dark"] .site-nav li a[aria-current="page"],
[data-theme="dark"] .site-nav li a:focus-visible{
  background: rgba(255,255,255,.08);
  box-shadow: var(--ring), 0 10px 30px rgba(0,0,0,.35);
}
[data-theme="dark"] .heroArtBase{ background: linear-gradient(160deg,#0f172a,#111827); }

/* ====== DARK THEME UNIFIER ====== */
/* 1) transparent page wrappers */
[data-theme="dark"] :is(main, .site-main, .page, .section, .container){
  background: transparent !important;
}

/* 2) panel-like surfaces — BUT do NOT touch the selected course card */
[data-theme="dark"] :is(
  .card,
  .panel,
  .box,
  .search,
  .newsForm,
  .plannerPanel,
  .courseCard,
  [class*="card"],
  [class*="panel"],
  [class*="box"],
  [class*="Card"]
):not(.cardSelected, .noteKeep){
  background: var(--panel) !important;
  color: var(--ink) !important;
  box-shadow: var(--ring), var(--shadow-lg) !important;
  border-color: rgba(255,255,255,.08) !important;
}

/* Keep the Notes yellow in dark mode (beats any remaining !important) */
[data-theme="dark"] .noteKeep{
  background: linear-gradient(180deg,#fff9c9 0%, #fff3a3 100%) !important;
  color: #0b0f1a !important;                     /* readable on yellow */
  border-color: rgba(0,0,0,.22) !important;
  box-shadow: var(--ring), 0 16px 48px rgba(0,0,0,.35) !important;
}

/* 3) muted text inside panels */
[data-theme="dark"] :is(.body, .bodyMuted, .cardMeta, .footerMuted, .subtitle){
  color: var(--ink-dim) !important;
}

/* 4) inputs */
[data-theme="dark"] :is(input, select, textarea){
  background: var(--panel) !important;
  color: var(--ink) !important;
  border: 1px solid rgba(255,255,255,.10) !important;
}
[data-theme="dark"] ::placeholder{ color: var(--ink-dim) !important; }

/* 5) dialogs/toasts */
[data-theme="dark"] :is(dialog, [role="dialog"], .modal, .toast, [class*="Toast"], [class*="Modal"]){
  background: var(--panel) !important;
  color: var(--ink) !important;
  border: 1px solid rgba(255,255,255,.10) !important;
  box-shadow: var(--ring), var(--shadow-lg) !important;
}

/* 6) course/planner list items that might be links/divs */
[data-theme="dark"] :is([class*="course"], [class*="planner"]) :is([class*="item"], [class*="row"], [class*="card"]):not(.cardSelected){
  background: var(--panel) !important;
}

/* ===== Buttons (shared) ===== */
.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:10px 16px; border:0; border-radius:9999px; cursor:pointer;
  color:#fff; background:linear-gradient(90deg, #a78bfa, #22d3ee);
  box-shadow:0 6px 20px rgba(0,0,0,.25); font-weight:600;
  transition: transform .15s ease, filter .15s ease, opacity .2s ease;
}
.btn:hover{ transform:translateY(-1px); filter:brightness(1.05) }
.btn:active{ transform:translateY(0); filter:brightness(.98) }
.btn:disabled{ opacity:.75; cursor:default; transform:none; filter:none }

/* ==== “Add to planner” animated pill (re-usable) ==== */
.addBtn{
  position:relative; appearance:none; border:0; outline:0; cursor:pointer;
  padding:8px 14px; border-radius:9999px; font-weight:700; color:#fff;
  background:linear-gradient(90deg, var(--accent), var(--accent-2));
  box-shadow:0 10px 30px rgba(109,40,217,.25);
  transition: transform .15s ease, filter .15s ease, box-shadow .2s ease, background .2s ease;
  overflow:hidden;
}
.addBtn:hover{ filter:brightness(.98) }
.addBtn:active{ transform:translateY(1px) }
[data-theme="dark"] .addBtn{ box-shadow: var(--ring), 0 10px 30px rgba(0,0,0,.45) }

/* label / states */
.addBtn__label{ display:block; transition:opacity .18s ease, transform .18s ease }
.addBtn__check,
.addBtn__warn{
  position:absolute; inset:0; display:grid; place-items:center;
  color:#fff; opacity:0; transform: scale(.8);
  transition: opacity .18s ease, transform .18s ease;
}

/* drawn tick */
.addBtn__tickPath{ stroke-dasharray:32; stroke-dashoffset:32 }
@keyframes tickDraw{ to{ stroke-dashoffset:0 } }

/* shine sweep */
.addBtn__shine{
  pointer-events:none; position:absolute; inset:0;
  background: linear-gradient(100deg, transparent 20%, rgba(255,255,255,.45) 45%, transparent 70%);
  transform: translateX(-120%); opacity:0;
}
@keyframes shineSweep{
  0%{ transform: translateX(-120%); opacity:.3 }
  100%{ transform: translateX(120%);  opacity:0 }
}

/* ripple */
.addBtn::after{
  content:""; position:absolute; left:50%; top:50%;
  width:12px; height:12px; border-radius:999px;
  background: radial-gradient(circle, rgba(255,255,255,.35), transparent 60%);
  transform: translate(-50%,-50%) scale(.1); opacity:0; pointer-events:none;
}
@keyframes ripple{
  0%{ opacity:.35; transform: translate(-50%,-50%) scale(.2) }
  100%{ opacity:0; transform: translate(-50%,-50%) scale(2.3) }
}

/* success state */
.addBtn[data-state="added"] .addBtn__label{ opacity:0; transform: translateY(-6px) }
.addBtn[data-state="added"] .addBtn__check{ opacity:1; transform: scale(1) }
.addBtn[data-state="added"] .addBtn__tickPath{ animation: tickDraw .5s ease forwards }
.addBtn[data-state="added"] .addBtn__shine{ opacity:.9; animation: shineSweep .75s ease forwards .05s }
.addBtn[data-state="added"]::after{ animation: ripple .6s ease-out forwards }
.addBtn[data-state="added"]{
  background: linear-gradient(90deg, #10b981, #22c55e);
  box-shadow: 0 10px 30px rgba(16,185,129,.25);
}

/* warning (already exists) */
@keyframes btnShake{
  0%,100%{ transform: translateX(0) }
  25%{ transform: translateX(-2px) }
  75%{ transform: translateX(2px) }
}
.addBtn[data-state="exists"] .addBtn__label{ opacity:0; transform: translateY(-6px) }
.addBtn[data-state="exists"] .addBtn__warn{ opacity:1; transform: scale(1) }
.addBtn[data-state="exists"]{
  background: linear-gradient(90deg, #f59e0b, #f97316); /* amber */
  box-shadow: 0 10px 30px rgba(245,158,11,.25);
  animation: btnShake .28s ease;
}

/* === THEME TOGGLER (restore) ========================================== */
.theme-toggle{
  appearance:none;
  border:0;
  cursor:pointer;
  outline:0;
  width:36px;
  height:36px;
  border-radius:999px;
  display:grid;
  place-items:center;
  background:#fff;
  box-shadow: var(--ring), 0 8px 20px rgba(15,23,42,.08);
  transition: transform .15s ease, filter .15s ease, background-color .2s ease;
}
.theme-toggle:hover{ filter: brightness(1.02) }
.theme-toggle:active{ transform: translateY(1px) }

[data-theme="dark"] .theme-toggle{
  background:#0b1220;
  box-shadow: var(--ring), 0 8px 20px rgba(0,0,0,.50);
}

.theme-toggle svg{
  fill: currentColor;
  stroke: currentColor;
  color: var(--ink);
  transition: transform .35s ease, opacity .2s ease;
}

/* put the two icons on top of each other and cross-fade */
.theme-toggle .sun,
.theme-toggle .moon{
  position:absolute;
}

/* default: show sun, hide moon */
.theme-toggle .moon{ opacity:0; transform: scale(.65) rotate(-90deg); }

/* dark: hide sun, reveal moon */
[data-theme="dark"] .theme-toggle .sun{ opacity:0; transform: scale(.65) rotate(90deg); }
[data-theme="dark"] .theme-toggle .moon{ opacity:1; transform: scale(1) rotate(0deg); }
/* --- Header brand logo --- */
.brand {
  display: inline-flex;
  align-items: center;
  margin-left: 0; /* pull out of the container */
  padding-left:0;           /* keep comfortable hit area */
  text-decoration: none;
}

.brandLogo {
  height: var(--brand-logo-h) !important;  /* win any specificity battles */
  max-height: none;
  width: auto;
  display: block;
  border: 0;
  box-shadow: none;
}

@media (min-width: 980px) {
  .brandLogo { height: 90px; }
}
.site-nav__inner{
  max-width: 1280px;
  margin: 0 auto;
  padding: 10px var(--container-pad);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/* make ONLY the brand hang to the extreme left of the viewport */
.brand{
  display: inline-flex;
  align-items: center;
  margin-left: calc(-1 * var(--container-pad)); /* pull out of container */
  padding-left: var(--container-pad);           /* keep comfy hit area */
  text-decoration: none;
}

/* logo sizing (adjust to taste) */

.brandLogo{
  height: var(--brand-logo-h);
  width: auto;
  display:block;
  border:0;
  box-shadow:none;
  image-rendering: -webkit-optimize-contrast;
}

.site-nav ul{ list-style:none; display:flex; gap:18px; margin:0; padding:0 }
.site-nav a{
  text-decoration:none; color:var(--ink-dim);
  padding:8px 12px; border-radius:9999px; font-weight:600;
}
.site-nav a:hover{ color:var(--ink) }
.site-nav li a[aria-current="page"],
.site-nav li a:focus-visible{
  background:#fff; color:var(--ink);
  box-shadow: var(--ring), var(--shadow-lg);
}

/* Dark theme border/color for the shortened bar only */
[data-theme="dark"] .site-nav::after{
  background: var(--navbg);
  border-bottom:1px solid rgba(255,255,255,.08);
}

/* Optional: scale logo slightly down on small viewports; up on large */
@media (max-width: 980px){
  .brandLogo{ height: clamp(48px, 8.5vw, var(--brand-logo-h)); }
}


:root {
  /* Light theme */
  --chat-bg-ai: linear-gradient(180deg, #ffffff, #f7f7fb);
  --chat-text-ai: #1a1a1a;
  --chat-bg-user: linear-gradient(90deg, #6d28d9, #9333ea); /* purple */
  --chat-text-user: #ffffff;
}

[data-theme="dark"] {
  /* Dark theme */
  --chat-bg-ai: linear-gradient(180deg, #1f2937, #111827); /* dark grey */
  --chat-text-ai: #f9fafb;
  --chat-bg-user: linear-gradient(90deg, #3b82f6, #2563eb); /* blue */
  --chat-text-user: #ffffff;
}
